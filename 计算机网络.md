# 计算机网络学习笔记

## Chapter 1 计算机网络体系结构

### 1.1 计算机网络的概念、组成与功能

### 1.2 计算机网络的分类

### 1.3 计算机网络的分层结构

### 1.4 计算机网络协议、接口、服务等概念

### 1.5 ISO/OSI参考模型和TCP/IP模型

## Chapter 2 物理层

不考

## Chapter 3 数据链路层

### 3.1 数据链路层的功能

### 3.2 差错控制

#### 3.2.1 检错编码

#### 3.2.2 纠错编码

### 3.3 流量控制与可靠传输机制

#### 3.3.1 流量控制、可靠传输和滑轮窗口机制

#### 3.3.2 停止-等待协议

#### 3.3.3 后退N帧协议

#### 3.3.4 选择重传协议

### 3.4 介质访问控制

#### 3.4.1 信道划分介质访问控制

#### 3.4.2 随机访问介质访问控制

### 3.5 局域网

#### 3.5.1 局域网的基本概念与体系结构

#### 3.5.2 以太网与IEEE 802.3

### 3.6 数据链路层设备

#### 3.6.1 网桥

#### 3.6.2 局域网交换机及其工作原理

## Chapter 4 网络层

### 4.1 网路层的功能

#### 4.1.1 路由与转发

#### 4.1.2 拥塞控制

### 4.2 路由算法

#### 4.2.1 距离向量路由算法

#### 4.2.2 链路状态路由算法

#### 4.2.3 层次路由

### 4.3 IPv4

#### 4.3.1 IPv4分组

#### 4.3.2 IPv4地址与NAT

#### 4.3.3 子网划分与子网掩码、CIDR

#### 4.3.4 ARP协议、DHCP协议与ICMP协议

### 4.4 IPv6

不考

### 4.5 路由协议

#### 4.5.1 自治系统

#### 4.5.2 域内路由和域间路由

#### 4.5.3 RIP路由协议

不考

#### 4.5.4 OSPF路由协议

#### 4.5.5 BGP路由协议

### 4.6 IP组播

不考

### 4.7 移动IP

不考

### 4.8 网络层设备

#### 4.8.1 路由器的组成与功能

#### 4.8.2 路由表与路由转发



## Chapter 5 传输层

### 5.1 传输层提供的服务

#### 5.1.1 传输层的功能

#### 5.1.2 传输层寻址与端口

#### 5.1.3 无连接服务与面向连接服务

### 5.2 UDP协议

#### 5.2.1 UDP数据报

#### 5.2.2 UDP校验

### 5.3 TCP协议

#### 5.3.1 TCP段

#### 5.3.2 TCP连接管理

#### 5.3.3 TCP可靠传输

#### 5.3.4 TCP流量控制与拥塞控制

## Chapter  6 应用层

### 6.1 网络应用模型

#### 6.1.1 CS模型

#### 6.1.2 P2P模型

不考

### 6.2 域名系统(DNS)

#### 6.2.1 层次域名空间

#### 6.2.2 域名服务器

#### 6.2.3 域名解析过程

### 6.3 文件传输协议(FTP)

不考

### 6.4 电子邮件

#### 6.4.1 电子邮件系统的组成结构

#### 6.4.2 电子邮件格式与MIME

#### 6.4.3 SMTP协议与POP3协议

### 6.5 万维网(www)

#### 6.5.1 WWW的概念与组成结构

#### 6.5.2 HTTP协议



## Chapter  7 各层设备

### 路由器



路由器并不会转发广播数据，也就是说广播数据到达路由器，是会被丢弃的

## Chapter  8 各层协议汇总

### 8.1 数据链路层协议

#### 



### 8.2 网络层协议

### 8.3 传输层协议

### 8.4 应用层协议

## Chapter  9 各层应用汇总

### 9.1 PING

PING是分组网间探测，主要用于测试两台主机之间的连接性能。

PING使用了ICMP回送请求和回答报文。

**PING工作在应用层，它直接使用网络层的ICMP，而不使用传输层的UDP/TCP。**

因此我们只能ping一个ip地址/DNS域名，不能ping套接字，因为没有端口号。

**Attention**：

有的vpn工作在应用层，即使你通过vpn能访问外网，也无法ping外网。

### 9.2 



## Chapter 10 零碎知识点



### 10.1 网段、冲突域、广播域与自治系统



**网段**

是物理层的定义，使用同一物理层设备（传输介质，中继器，集线器等）能够直接通讯的那一部分 
1. 使用同一物理层的设备之间必然通过相同的传输介质直接相互连接，（如交叉双绞线直接连接的两台主机），是一个网段 
2. 两组其传输介质并非直接相连的网络设备，如果它们的传输介质通过工作在物理层的扩展设备如中继器和集线器等转接连接，则仍然被视为同一物理层中的设备，是一个网段 
3. 工作在数据链路层或更高层的设备如网桥、交换机、路由器等等，由它们连接起来的两组设备仍然分别处于各自独立的物理层，是两个网段

总的来说，**如果没有第二层及以上的设备的隔离，那么这些设备都在一个网段之中。**



**冲突域**

一次载波监听的范围，一个站点向另一个站点发出信号。除目的站点外，有多少站点能收到这个信号，这些站点就构成一个冲突域。

一般可以被第二层及以上的设备隔离。



**广播域**

一次广播发生的范围，多个冲突域构成一个广播域。

因为路由器不会转发广播信号，一般可以被路由器等第三层及以上的设备隔离。

**利用虚拟局域网技术VLAN可以让交换机隔离广播域！！！**



**广播域与冲突域的区别**

1. **广播域可以跨网段，而冲突域只是发生的同一个网段的。**以太网中，冲突域是由hub组织的。一个hub就是一个冲突域。交换机的每个端口都是一个冲突域。网段，又叫潜在冲突域。

2. 冲突域在同一个冲突域中的每一个节点都能收到所有被发送的帧。广播域在网络中能接收任一设备发出的广播帧的所有设备的集合 。

3. 冲突域是基于第一层（物理层），而广播域是机于第二层（数据链路层） 。

4. 广播域就是说，如果站点发出一个广播信号后能接收到这个信号的范围，**通常来说一个局域网就是一个广播域。**（用路由器连接的除外）。冲突域是一个站点向另一个站点发出信号，除目的站点外，有多少站点能收到这个信号，这些站点就构成一个冲突域。

5. HUB 所有端口都在同一个广播域，冲突域内。Swith所有端口都在同一个广播域内，而每一个端口就是一个冲突域。



**自治系统**

自治系统（AS）是由一个技术管理机构管理，使用统一选路策略的一组路由器集合。

自治系统编号范围：1-65535，其中1-64511是互联网上注册公有AS号，类似公网IP地址。

64512-65535是私有AS号，类似私网IP地址。

自治系统是使用同一个内部网关协议(路由选择协议)的系统，一般由很多个局域网广播域组成。一个自治系统内的所有路由器都必须是连通的。



### 10.2 广播帧、未知帧、同网帧、异网帧



**未知帧:**
第一,Switch的转发表中没有该帧的目的Mac地址
第二,DEST ADDR(目的地址)不是全F(十六进制数)

**广播帧：**

我们把目标地址为全F的帧叫做广播帧，对应成二进制数字就是全为1

**同网帧与异网帧：**

同网异网说的是一个包的来源端口和去往端口是不是一样的(端口指交换机端口)





**ARP包就是一个广播帧**

网络通电之后我们要发包首先发送的就是ARP包,它的作用就是学习地址.

比方说我们从主机pc3->主机pc4发一个ICMP包,从图中我们可以看出ARP包会先于我们自定的ICMP包之前发,从上边图我们可以知道，ARP是一个广播帧。

**发包的详细过程**

1.ARP包先发送

2.ARP包到达集线器(Hub)

**Hub的特性：简要概述：就是不管是什么帧，只要你来就统统广播**


3.该帧到达交换机(Switch),那么Switch将会学习该帧的源地址并且转发该帧。

因为该帧是一个广播帧所以交换机(Switch)会将帧广播出去。

**Switch的特性:丢弃同网帧、转发异网帧、广播广播帧、广播未知帧**


查看转发表：


整体展示：


问:仔细看上图,你发现了什么呢？

答:你会发现左边部分主机上的包上边有(X)叉号,这又是为什么呢?是包出错了？

其实不然,

这是ARP协议的工作工程: 当发现IP地址不是自己所要找的目标地址,那么就会将该包丢弃(换句话说就是不是自己想要的,那么我就直接扔了,不管了)。对于匹配成功的，则会返回ARP包并把自己的Mac地址写到返回的包中。

如下图：


4.Hub广播从pc4发送的包。

当包到达交换机时,交换机学习源地址并且转发该帧,因为他们可以认为是连接在同一个端口上(交换机上的),根据Switch的特性,那么将丢弃同网帧：
查看转发表(确实是同一个端口上的)：


同时,该包也传送到了发送ARP包的pc3主机上,至此,主机pc3就知道了主机pc4的Mac地址,也就是知道了他在那里,现在就可以正常发包啦！
整体展示：


5.发送ICMP包


6.Hub广播该帧（前边已经介绍过Hub，这里不再做赘述）
直接上图：


7.收到后发送响应：
直接上图：


8.完成


上边发包内容的小结
总结：上边讲解了哪些呢？
对于交换机我们演示了：学习源地址、丢弃同网帧、广播广播帧（ARP使我们举的例子）
对于Hub:我们了解了Hub的工作过程,不管是谁,都需要广播,(管他是神还是魔，都要一视同仁，平等对待，哈哈哈这里说这句话就是想帮助大家能更好的理解)
接下来,我们来学习转发异网帧和广播未知帧
注：这两种都是对Switch来讲的，Hub到此就讲完啦！
接着讲解,坚持就是胜利,加油!!!
一.转发异网帧

1.我们从主机pc3->主机pc5发包,按照上边讲的一样,先要发送ARP包,知道目的主机的Mac地址是多少。


2.主机pc5返回一个ARP包,其中包含着自己的Mac地址,当该包到达交换机的时候(敲黑板),Switch学习源地址,并把该包转发出去(重点:转发的话先查表,一查,发现来源端口和去往端口是不一样的,那么这个就叫做转发异网帧)

如下图所示：

该包到达交换机(学习源地址):

整体展示：


3.至此,知道了目的主机的Mac地址,可以发包啦,上边已有发包过程,就不写啦(偷个懒)！！！


二、广播未知帧
未知帧(再啰嗦一遍)：

Switch的转发表中没有该帧的目的Mac地址
并且目标地址（DEST ADDR）不是全F（对应二进制就是全1）
1.还是举主机pc3->主机pc4发包

上边我们已经知道,主机pc3->pc4主机可以正常发包了

而且转发表中也已经记录了主机pc3和主机pc4

如下图：


现在我们清空转发表，有两种情况

第一种是直接重启转发表.但是不建议使用这个.所以具体的我就不讲啦！若你想学怎样操作的话.可以下方留言

第二种是命令行操作

如下，若有问题，欢迎下方留言。


转发表状态：现在什么都没有


1.现在我们让主机pc3->主机pc4发包，我们发一个ICMP的包


2.到达Switch和主机pc4


3.主机pc4返回一个响应,Switch会将该帧广播出去,该帧是一个未知帧,转发表中没有,并且目的地址不是全F（十六进制,符合未知帧的条件)
该帧信息如下：


整体展示：

4.丢弃不需要的包，返回需要的包

### 10.3 单播、广播、组播

